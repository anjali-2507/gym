(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[903],{20067:function(){},72061:function(){},56852:function(e,t,a){Promise.resolve().then(a.bind(a,79710))},79710:function(e,t,a){"use strict";a.r(t);var r=a(57437),n=a(2265),l=a(49089),s=a(95186),i=a(19378),c=a(85994),d=a.n(c);a(21005);var o=a(53375);a(2578);var u=a(2093);t.default=()=>{let[e,t]=(0,n.useState)([]),[a,c]=(0,n.useState)(!0),[x,m]=(0,n.useState)(""),[h,g]=(0,n.useState)([null,null]),[b,p]=(0,n.useState)(!1),f=(0,n.useRef)(null);(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/Gym_Management"),a=await e.json();a.success&&a.data&&t(a.data)}catch(e){console.error(e)}finally{c(!1)}})()},[]),(0,n.useEffect)(()=>{let e=e=>{f.current&&!f.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let y=e=>new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),N=e=>{let t=new Date,[a,r]=e.split(":"),[n,l]=r.split(" "),s=parseInt(a,10);"pm"===l&&s<12&&(s+=12),"am"===l&&12===s&&(s=0);let i=new Date("".concat(t.toLocaleDateString()," ").concat(s,":").concat(n,":00"));return isNaN(i.getTime())?new Date:i},w=e=>String(e||"").replace(/\D/g,""),j=e=>{g(e)},v=e=>{if(!e.time||!e.statusTime)return"N/A";try{let t=N(e.time),a=N(e.statusTime).getTime()-t.getTime();if(a<0)return"N/A";let r=Math.floor(a/36e5),n=Math.floor(a%36e5/6e4);return 0===r?"".concat(n,"m"):"".concat(r,"h ").concat(n,"m")}catch(e){return"N/A"}},k=e=>{switch(e){case"yes":return"bg-green-100 text-green-800 dark:bg-green-600 dark:text-green-100";case"no":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";case"Pending":return"bg-orange-100 text-orange-800 dark:bg-orange-800 dark:text-orange-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-100"}},T=((e,t,a)=>{let[r,n]=a,l=t.toLowerCase().trim();return e.filter(e=>{let t=(e.clientName||"").toLowerCase().trim(),a=w(e.clientNumber||""),s=t.includes(l)||a.includes(l),i=new Date(e.date),c=r&&n?i>=r&&i<=n:!r||i.toDateString()===r.toDateString();return s&&c})})(e,x,h),A=!!x||!!h[0]||!!h[1];return a?(0,r.jsx)("div",{className:"p-4 text-center text-gray-800 dark:text-white",children:"Loading..."}):(0,r.jsxs)("div",{className:"h-screen bg-white p-4 dark:bg-gray-900",children:[(0,r.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"GYM Attendance Report Data"}),(0,r.jsxs)("div",{className:"relative",ref:f,children:[(0,r.jsx)("button",{onClick:()=>p(!b),className:"rounded-md bg-blue-500 px-4 py-2 text-white hover:bg-blue-600",children:"Export"}),b&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-md z-10",children:[(0,r.jsx)("button",{onClick:()=>{let e=new o.default,t=T.map(e=>[e.clientName,e.clientNumber,y(e.date),e.time,e.status,y(e.markDate),e.statusTime,e.TotalTime]);e.text("Gym Attendance Report",14,10),e.autoTable({head:[["Client Name","Client Number","Date","Time","Status","Status Time","Total Time"]],body:t,startY:20}),e.save("Gym_Attendance_Report.pdf")},className:"block w-full px-4 py-2 text-gray-800 hover:bg-gray-200 text-left",children:"Export to PDF"}),(0,r.jsx)("button",{onClick:()=>{let e=T.map(e=>({"Client Name":e.clientName||"N/A","Client Number":e.clientNumber||"N/A",Date:y(e.date)||"N/A",Time:e.time||"N/A",Status:e.status||"N/A","Status Time":e.statusTime||"N/A","Total Time":e.TotalTime||"N/A"})),t=u.P6.json_to_sheet(e),a=u.P6.book_new();u.P6.book_append_sheet(a,t,"Gym_Attendance"),u.NC(a,"Gym_Attendance_Report.xlsx")},className:"block w-full px-4 py-2 text-gray-800 hover:bg-gray-200 text-left",children:"Export to Excel"})]})]})]}),(0,r.jsxs)("div",{className:"mb-4 flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,r.jsx)(s.I,{type:"text",placeholder:"Search by client name or number...",value:x,onChange:e=>{m(e.target.value)},className:"pl-10"}),(0,r.jsx)(l.U41,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 transform text-gray-400"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(d(),{selectsRange:!0,onChange:e=>j(e),isClearable:!0,placeholderText:"Select date or date range",className:"w-full rounded-md border px-3 py-2 text-sm text-gray-800 dark:bg-gray-800 dark:text-white",dateFormat:"dd/MM/yyyy"}),(0,r.jsx)(l.IiJ,{className:"absolute right-3 top-1/2 h-5 w-5 -translate-y-1/2 transform text-gray-400"})]}),A&&(0,r.jsx)("button",{onClick:()=>{m(""),g([null,null])},className:"rounded-md bg-blue-500 px-4 py-2 text-white hover:bg-blue-600 dark:bg-blue-700 dark:hover:bg-blue-800",children:"Clear Filters"})]}),(0,r.jsx)(i.ScrollArea,{className:"h-[calc(100vh-230px)] overflow-auto rounded-md border border-gray-200 dark:border-gray-700",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full table-auto text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"sticky top-0 bg-gray-100 px-4 py-3 text-center font-semibold text-gray-700 dark:bg-gray-700 dark:text-white",children:[(0,r.jsx)("th",{children:"Client Name"}),(0,r.jsx)("th",{children:"Client Number"}),(0,r.jsx)("th",{children:"Date"}),(0,r.jsx)("th",{children:"Time"}),(0,r.jsx)("th",{children:"Status"}),(0,r.jsx)("th",{children:"Status Time"}),(0,r.jsx)("th",{children:"Total Time"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:T.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,r.jsx)("td",{className:"px-4 py-3 text-center text-gray-800 dark:text-white",children:e.clientName||"N/A"}),(0,r.jsx)("td",{className:"whitespace-nowrap px-4 py-3 text-center text-gray-800 dark:text-white",children:e.clientNumber||"N/A"}),(0,r.jsx)("td",{className:"px-4 py-3 text-center text-gray-800 dark:text-white",children:e.date?y(e.date):"N/A"}),(0,r.jsx)("td",{className:"px-4 py-3 text-center text-gray-800 dark:text-white",children:e.time||"N/A"}),(0,r.jsx)("td",{className:"px-4 py-3 text-center",children:(0,r.jsx)("span",{className:"inline-flex rounded-full px-3 py-1 text-xs font-medium ".concat(k(e.status)),children:e.status||"N/A"})}),(0,r.jsx)("td",{className:"px-4 py-3 text-center text-gray-800 dark:text-white",children:e.statusTime||"N/A"}),(0,r.jsx)("td",{className:"px-4 py-3 text-center text-gray-800 dark:text-white",children:e.TotalTime||v(e)})]},e._id))})]})})})]})}},95186:function(e,t,a){"use strict";a.d(t,{I:function(){return s}});var r=a(57437),n=a(2265),l=a(94508);let s=n.forwardRef((e,t)=>{let{className:a,type:n,...s}=e;return(0,r.jsx)("input",{type:n,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...s})});s.displayName="Input"},19378:function(e,t,a){"use strict";a.d(t,{B:function(){return c},ScrollArea:function(){return i}});var r=a(57437),n=a(2265),l=a(90314),s=a(94508);let i=n.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,r.jsxs)(l.fC,{ref:t,className:(0,s.cn)("relative",a),...i,children:[(0,r.jsx)(l.l_,{className:"h-full w-full rounded-[inherit]",children:n}),(0,r.jsx)(c,{}),(0,r.jsx)(l.Ns,{})]})});i.displayName=l.fC.displayName;let c=n.forwardRef((e,t)=>{let{className:a,orientation:n="vertical",...i}=e;return(0,r.jsx)(l.gb,{ref:t,orientation:n,className:(0,s.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...i,children:(0,r.jsx)(l.q4,{className:"relative flex-1 rounded-full bg-border"})})});c.displayName=l.gb.displayName},94508:function(e,t,a){"use strict";a.d(t,{cn:function(){return l}});var r=a(61994),n=a(71407);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m)((0,r.W)(t))}}},function(e){e.O(0,[360,425,699,505,544,579,314,859,346,971,117,744],function(){return e(e.s=56852)}),_N_E=e.O()}]);